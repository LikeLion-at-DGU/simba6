<!--끼리평가페이지-->
{% extends 'base.html' %}
{% load static %}

{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://kit.fontawesome.com/58cae1d5f8.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'css/profile_24.css' %}">
</head>
<body>
    <div class="back_button">
        <div class="back_button"><i class=" fas fa-solid fa-circle-chevron-left fa-3x " style="color: #35ccaa;"></i></div>
    </div>
    <div class="content">

        <div class="profile_profile">끼리평가</div>
        <div class="container">
            <div class="container_background">
                {% for my_project in my_projects %}
                    <div class="halfbox1">
                        <div class="halfbox_top1">&ensp;{{ my_project.project.post.title }}</div>
                        <div class="halfbox_bottom1">
                            {% if my_project.project.post.writer.id != user.id %}
                                {{ my_project.project.post.writer.profile.nickname }}
                                {% if user.profile in my_project.project.post.writer.profile.likers.all %}
                                    <a href="{% url 'users:like' my_project.project.post.writer.id %}"><button type="button" class="btn btn-outline-info">좋아요 취소</button></a>
                                {% else %}
                                    <a href="{% url 'users:like' my_project.project.post.writer.id %}"><button type="button" class="btn btn-outline-info">좋아요</button></a>
                                {% endif %}
                                {% if user.profile in my_post_project.project.writer.profile.haters.all %}
                                        <a href="{% url 'users:hate' my_project.project.post.writer.id %}"><button type="button" class="btn btn-outline-info">싫어요 취소</button></a>
                                {% else %}
                                        <a href="{% url 'users:hate' my_project.project.post.writer.id %}"><button type="button" class="btn btn-outline-info">싫어요</button></a>
                                {% endif %}
                            {% endif %}
                            {% for hater in my_project.project.post.writer.profile.haters.all %}
                                {{ hater.nickname }}
                            {% endfor %}
                            <br>
                            {% for member in my_project.member %}
                                {% if member.user != user %}
                                    {{ member.user.profile.nickname }}
                                    {% if user.profile in member.user.profile.likers.all %}
                                        <a href="{% url 'users:like' member.user.id %}"><button type="button" class="btn btn-outline-info">좋아요 취소</button></a>
                                    {% else %}
                                        <a href="{% url 'users:like' member.user.id %}"><button type="button" class="btn btn-outline-info">좋아요</button></a>
                                    {% endif %}
                                    {% if user.profile in member.user.profile.haters.all %}
                                        <a href="{% url 'users:hate' member.user.id %}"><button type="button" class="btn btn-outline-info">싫어요 취소</button></a>
                                    {% else %}
                                        <a href="{% url 'users:hate' member.user.id %}"><button type="button" class="btn btn-outline-info">싫어요</button></a>
                                    {% endif %}
                                    {% for hater in member.user.profile.haters.all %}
                                        {{ hater.nickname }}
                                    {% endfor %}
                                    <br>
                                {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}

                {% for my_post_project in my_post_projects %}
                    <div class="halfbox1">
                        <div class="halfbox_top1">&ensp;{{ my_post_project.project.title }}</div>
                        <div class="halfbox_bottom1">
                            {% if my_post_project.project.writer.id != user.id %}
                                {{ my_post_project.project.writer.profile.nickname }}
                                {% if user.profile in my_post_project.project.writer.profile.likers.all %}
                                    <a href="{% url 'users:like' my_post_project.project.writer.id %}"><button type="button" class="btn btn-outline-info">좋아요 취소</button></a>
                                {% else %}
                                    <a href="{% url 'users:like' my_post_project.project.writer.id %}"><button type="button" class="btn btn-outline-info">좋아요</button></a>
                                {% endif %}
                                {% if user.profile in my_post_project.project.writer.profile.haters.all %}
                                        <a href="{% url 'users:hate' my_post_project.project.writer.id %}"><button type="button" class="btn btn-outline-info">싫어요 취소</button></a>
                                {% else %}
                                        <a href="{% url 'users:hate' my_post_project.project.writer.id %}"><button type="button" class="btn btn-outline-info">싫어요</button></a>
                                {% endif %}
                                <br>
                            {% endif %}
                            {% for member in my_post_project.member %}
                                {% if user != member.user %}
                                    {{ member.user.profile.nickname }}
                                    {% if user.profile in member.user.profile.writer.profile.likers.all %}
                                        <a href="{% url 'users:like' member.user.id %}"><button type="button" class="btn btn-outline-info">좋아요 취소</button></a>
                                    {% else %}
                                        <a href="{% url 'users:like' member.user.id %}"><button type="button" class="btn btn-outline-info">좋아요</button></a>
                                    {% endif %}
                                    {% if user.profile in member.user.profile.writer.profile.haters.all %}
                                        <a href="{% url 'users:hate' member.user.id %}"><button type="button" class="btn btn-outline-info">싫어요 취소</button></a>
                                    {% else %}
                                        <a href="{% url 'users:hate' member.user.id %}"><button type="button" class="btn btn-outline-info">싫어요</button></a>
                                    {% endif %}
                                {% endif %}
                                {% for hater in member.user.profile.haters.all %}
                                    {{ hater.nickname }}
                                {% endfor %}
                                <br>
                            {% endfor %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</body>
</html>

{% endblock %}